!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).sidechatJs={})}(this,function(e){function t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(t=function(){return!!e})()}function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},r.apply(this,arguments)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}function i(e){var r="function"==typeof Map?new Map:void 0;return i=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,i)}function i(){return function(e,r,o){if(t())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,r);var s=new(e.bind.apply(e,i));return o&&n(s,o.prototype),s}(e,arguments,o(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),n(i,e)},i(e)}var s=/*#__PURE__*/function(e){var t,r;function o(t){var r;return(r=e.call(this,t)||this).name="SidechatAPIError",r}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,n(t,r),o}(/*#__PURE__*/i(Error));function u(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}e.SidechatAPIClient=function(e){var t=this,o=this,n=this,i=this,c=this,a=this,h=this,f=this,l=this,d=this,p=this,v=this;void 0===e&&(e=""),this.defaultHeaders={Accept:"application/json","Content-Type":"application/json"},this.setToken=function(e){v.userToken=e},this.loginViaSMS=function(e){try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/login_register",{method:"POST",headers:t.defaultHeaders,body:JSON.stringify({phone_number:"+1"+e,version:3})})).then(function(e){return Promise.resolve(e.json())})},function(e){throw console.error(e),new s("Failed to request SMS verification.")}))}catch(e){return Promise.reject(e)}},this.verifySMSCode=function(e,t){try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/verify_phone_number",{method:"POST",headers:o.defaultHeaders,body:JSON.stringify({phone_number:"+1"+e,code:t.toUpperCase()})})).then(function(e){return Promise.resolve(e.json()).then(function(e){var t;return null!=e&&null!=(t=e.logged_in_user)&&t.token&&(o.userToken=e.logged_in_user.token),e})})},function(e){throw console.error(e),new s("Failed verify this code.")}))}catch(e){return Promise.reject(e)}},this.setAge=function(e,t){try{if(e<13)throw new s("You're too young to use Offsides.");return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/complete_registration",{method:"POST",headers:n.defaultHeaders,body:JSON.stringify({age:Number(e),registration_id:t})})).then(function(e){return Promise.resolve(e.json()).then(function(e){return e.token&&(n.userToken=e.token),e})})},function(e){throw console.error(e),new s("Failed verify this code.")}))}catch(e){return Promise.reject(e)}},this.registerEmail=function(e){try{if(!i.userToken)throw new s("User is not authenticated.");return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v2/users/register_email",{method:"POST",headers:r({},i.defaultHeaders,{Authorization:"Bearer "+i.userToken}),body:JSON.stringify({email:e})})).then(function(e){return Promise.resolve(e.json()).then(function(e){if(e.message)throw new s(e.message);return e})})},function(){throw console.error(error),new s("Failed to request email verification.")}))}catch(e){return Promise.reject(e)}},this.checkEmailVerification=function(){try{if(!c.userToken)throw new s("User is not authenticated.");return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/users/check_email_verified",{method:"GET",headers:r({},c.defaultHeaders,{Authorization:"Bearer "+c.userToken})})).then(function(e){return Promise.resolve(e.json()).then(function(e){if(e.verified_email_updates_response)return e.verified_email_updates_response;throw new s((null==e?void 0:e.message)||"Email is not verified.")})})},function(){throw console.error(error),new s("Email is not verified.")}))}catch(e){return Promise.reject(e)}},this.setDeviceID=function(e){try{if(!a.userToken)throw new s("User is not authenticated.");return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/register_device_token",{method:"POST",headers:r({},a.defaultHeaders,{Authorization:"Bearer "+a.userToken}),body:JSON.stringify({build_type:"release",bundle_id:"com.flowerave.sidechat",device_token:e})})).then(function(t){return Promise.resolve(t.json()).then(function(t){return Promise.resolve(AsyncStorage.setItem("deviceID",e)).then(function(){return t})})})},function(e){throw console.error(e),new s("Failed verify this code.")}))}catch(e){return Promise.reject(e)}},this.getUserAndGroup=function(e){void 0===e&&(e="");try{if(!h.userToken)throw new s("User is not authenticated.");return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/updates?group_id="+e,{method:"GET",headers:r({},h.defaultHeaders,{Authorization:"Bearer "+h.userToken})})).then(function(e){return Promise.resolve(e.json())})},function(e){throw console.error(e),new s("Failed to get posts from group.")}))}catch(e){return Promise.reject(e)}},this.getGroupPosts=function(e,t,o){void 0===t&&(t="hot");try{if(!f.userToken)throw new s("User is not authenticated.");return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/posts?group_id="+e+"&type="+t+(o?"&cursor="+o:""),{method:"GET",headers:r({},f.defaultHeaders,{Authorization:"Bearer "+f.userToken})})).then(function(e){return Promise.resolve(e.json())})},function(e){throw console.error(e),new s("Failed to get posts from group.")}))}catch(e){return Promise.reject(e)}},this.setVote=function(e,t){try{if(!l.userToken)throw new s("User is not authenticated.");return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/posts/set_vote",{method:"POST",headers:r({},l.defaultHeaders,{Authorization:"Bearer "+l.userToken}),body:JSON.stringify({post_id:e,vote_status:t})})).then(function(e){return Promise.resolve(e.json())})},function(e){throw console.error(e),new s("Failed to change the vote on post.")}))}catch(e){return Promise.reject(e)}},this.getPostComments=function(e){try{if(!d.userToken)throw new s("User is not authenticated.");return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/posts/comments/?post_id="+e,{method:"GET",headers:r({},d.defaultHeaders,{Authorization:"Bearer "+d.userToken})})).then(function(e){function t(e){var t=new Map,o=[];return e.forEach(function(e){t.set(e.id,e);var r=t.get(e.reply_post_id);r&&e.reply_post_id!==e.parent_post_id?(r.replies||(r.replies=[]),r.replies.push(e)):o.push(e)}),r(o)}function r(e){return e.reduce(function(e,t){return e.push(t),t.replies&&e.push.apply(e,r(t.replies)),e},[])}return Promise.resolve(e.json()).then(function(e){return t(e.posts)})})},function(e){throw console.error(e),new s("Failed to get comments on post.")}))}catch(e){return Promise.reject(e)}},this.getAvailableGroups=function(){try{if(!p.userToken)throw new s("User is not authenticated.");return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/groups/explore",{method:"GET",headers:r({},p.defaultHeaders,{Authorization:"Bearer "+p.userToken})})).then(function(e){return Promise.resolve(e.json()).then(function(e){return Promise.resolve(e.groups)})})},function(e){throw console.error(e),new s("Failed to get groups from explore.")}))}catch(e){return Promise.reject(e)}},e&&(this.userToken=e)},e.SidechatAPIError=s});
//# sourceMappingURL=sidechat.umd.js.map
