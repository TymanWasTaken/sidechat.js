!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e||self).sidechatJs={})}(this,function(e){function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(r=function(){return!!e})()}function t(){return t=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},t.apply(this,arguments)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function n(e,r){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},n(e,r)}function i(e){var t="function"==typeof Map?new Map:void 0;return i=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(r){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return function(e,t,o){if(r())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var s=new(e.bind.apply(e,i));return o&&n(s,o.prototype),s}(e,arguments,o(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),n(i,e)},i(e)}var s=/*#__PURE__*/function(e){var r,t;function o(r){var t;return(t=e.call(this,r)||this).name="SidechatAPIError",t}return t=e,(r=o).prototype=Object.create(t.prototype),r.prototype.constructor=r,n(r,t),o}(/*#__PURE__*/i(Error));function u(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var c={Accept:"application/json","Content-Type":"application/json"};e.checkEmailVerification=function(e){try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/users/check_email_verified",{method:"GET",headers:t({},c,{Authorization:"Bearer "+e})})).then(function(e){return Promise.resolve(e.json()).then(function(e){if(e.verified_email_updates_response)return e.verified_email_updates_response;throw new s((null==e?void 0:e.message)||"Email is not verified.")})})},function(){throw console.error(error),new s("Email is not verified.")}))}catch(e){return Promise.reject(e)}},e.getAvailableGroups=function(e){try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/groups/explore",{method:"GET",headers:t({},c,{Authorization:"Bearer "+e})})).then(function(e){return Promise.resolve(e.json()).then(function(e){return e.groups})})},function(e){throw console.error(e),new s("Failed to get groups from explore.")}))}catch(e){return Promise.reject(e)}},e.getGroupPosts=function(e,r,o,n){void 0===o&&(o="hot");try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/posts?group_id="+e+"&type="+o+(n?"&cursor="+n:""),{method:"GET",headers:t({},c,{Authorization:"Bearer "+r})})).then(function(e){return Promise.resolve(e.json())})},function(e){throw console.error(e),new s("Failed to get posts from group.")}))}catch(e){return Promise.reject(e)}},e.getPostComments=function(e,r){try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/posts/comments/?post_id="+e,{method:"GET",headers:t({},c,{Authorization:"Bearer "+r})})).then(function(e){function r(e){var r=new Map,o=[];return e.forEach(function(e){r.set(e.id,e);var t=r.get(e.reply_post_id);t&&e.reply_post_id!==e.parent_post_id?(t.replies||(t.replies=[]),t.replies.push(e)):o.push(e)}),t(o)}function t(e){return e.reduce(function(e,r){return e.push(r),r.replies&&e.push.apply(e,t(r.replies)),e},[])}return Promise.resolve(e.json()).then(function(e){return r(e.posts)})})},function(e){throw console.error(e),new s("Failed to get comments on post.")}))}catch(e){return Promise.reject(e)}},e.getUserAndGroup=function(e,r){void 0===r&&(r="");try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/updates?group_id="+r,{method:"GET",headers:t({},c,{Authorization:"Bearer "+e})})).then(function(e){return Promise.resolve(e.json())})},function(e){throw console.error(e),new s("Failed to get posts from group.")}))}catch(e){return Promise.reject(e)}},e.loginViaSMS=function(e){try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/login_register",{method:"POST",headers:c,body:JSON.stringify({phone_number:"+1"+e,version:3})})).then(function(e){return Promise.resolve(e.json())})},function(){throw console.error(error),new s("Failed to request SMS verification.")}))}catch(e){return Promise.reject(e)}},e.registerEmail=function(e,r){try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v2/users/register_email",{method:"POST",headers:t({},c,{Authorization:"Bearer "+r}),body:JSON.stringify({email:e})})).then(function(e){return Promise.resolve(e.json()).then(function(e){if(e.message)throw new s(e.message);return e})})},function(){throw console.error(error),new s("Failed to request email verification.")}))}catch(e){return Promise.reject(e)}},e.setAge=function(e,r){try{if(e<13)throw new s("You're too young to use Offsides.");return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/complete_registration",{method:"POST",headers:c,body:JSON.stringify({age:Number(e),registration_id:r})})).then(function(e){return Promise.resolve(e.json())})},function(e){throw console.error(e),new s("Failed verify this code.")}))}catch(e){return Promise.reject(e)}},e.setDeviceID=function(e,r){try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/register_device_token",{method:"POST",headers:t({},c,{Authorization:"Bearer "+r}),body:JSON.stringify({build_type:"release",bundle_id:"com.flowerave.sidechat",device_token:e})})).then(function(r){return Promise.resolve(r.json()).then(function(r){return Promise.resolve(AsyncStorage.setItem("deviceID",e)).then(function(){return r})})})},function(e){throw console.error(e),new s("Failed verify this code.")}))}catch(e){return Promise.reject(e)}},e.setVote=function(e,r,o){try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/posts/set_vote",{method:"POST",headers:t({},c,{Authorization:"Bearer "+r}),body:JSON.stringify({post_id:e,vote_status:o})})).then(function(e){return Promise.resolve(e.json())})},function(e){throw console.error(e),new s("Failed to change the vote on post.")}))}catch(e){return Promise.reject(e)}},e.verifySMSCode=function(e,r){try{return Promise.resolve(u(function(){return Promise.resolve(fetch("https://api.sidechat.lol/v1/verify_phone_number",{method:"POST",headers:c,body:JSON.stringify({phone_number:"+1"+e,code:r.toUpperCase()})})).then(function(e){return Promise.resolve(e.json())})},function(e){throw console.error(e),new s("Failed verify this code.")}))}catch(e){return Promise.reject(e)}}});
//# sourceMappingURL=sidechat.umd.js.map
